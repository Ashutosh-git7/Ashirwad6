<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>USDT/INR Trading Platform</title>
<style>
body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; }
.container { max-width: 900px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
h2 { text-align: center; }
input, button { padding: 10px; margin: 5px 0; width: 100%; }
button { cursor: pointer; }
.table { width: 100%; border-collapse: collapse; margin-top: 10px; }
.table th, .table td { border: 1px solid #ddd; padding: 8px; text-align: center; }
.table th { background-color: #f2f2f2; }
</style>
</head>
<body>
<div class="container">
<h2>ðŸš€ USDT/INR Trading Platform</h2>

<h3>User Registration</h3>
<input type="text" id="userName" placeholder="Your Name">
<input type="text" id="userBEP20" placeholder="Your BEP20 Wallet">
<input type="text" id="userUPI" placeholder="Your UPI ID">
<button onclick="registerUser()">Register</button>

<hr>
<h3>Market Prices</h3>
<p>Market Price: <span id="marketPrice">--</span> USD</p>
<p>Buy Price (+5%): <span id="buyPrice">--</span> USD</p>
<p>Sell Price (-5%): <span id="sellPrice">--</span> USD</p>
<button onclick="fetchUSDTPrice()">Refresh Price</button>

<hr>
<h3>Deposit Request</h3>
<label>Amount (USDT or INR):</label>
<input type="number" id="depositAmount" value="0" step="0.01">
<select id="depositType">
  <option value="USDT">USDT (BEP20)</option>
  <option value="INR">INR (UPI)</option>
</select>
<button onclick="requestDeposit()">Send Deposit Request</button>

<hr>
<h3>Admin Panel</h3>
<table class="table" id="adminTable">
<thead>
<tr>
<th>UID</th>
<th>Name</th>
<th>User BEP20</th>
<th>User UPI</th>
<th>Deposit Type</th>
<th>Amount</th>
<th>Status</th>
<th>Actions</th>
</tr>
</thead>
<tbody></tbody>
</table>

<p>Total Deposits: <span id="totalDeposits">0</span></p>
<p>Total Profit (Spread): <span id="totalProfit">0</span></p>
</div>

<script>
let users = [];
let deposits = [];
let userIdCounter = 1;
let totalDeposits = 0;
let totalProfit = 0;

function registerUser() {
    let name = document.getElementById('userName').value.trim();
    let bep20 = document.getElementById('userBEP20').value.trim();
    let upi = document.getElementById('userUPI').value.trim();
    if(!name || !bep20 || !upi) { alert("Enter all details"); return; }
    let uid = "UID" + userIdCounter++;
    users.push({uid,name,bep20,upi});
    alert(`Registered! Your UID: ${uid}`);
    document.getElementById('userName').value = '';
    document.getElementById('userBEP20').value = '';
    document.getElementById('userUPI').value = '';
}

async function fetchUSDTPrice() {
    try {
        const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=tether&vs_currencies=usd');
        const data = await response.json();
        const market = data.tether.usd;
        const buy = (market*1.05).toFixed(2);
        const sell = (market*0.95).toFixed(2);
        document.getElementById('marketPrice').innerText = market.toFixed(2);
        document.getElementById('buyPrice').innerText = buy;
        document.getElementById('sellPrice').innerText = sell;
    } catch(err) {
        console.error(err);
        alert("Error fetching price");
    }
}
fetchUSDTPrice();

function requestDeposit() {
    let amt = parseFloat(document.getElementById('depositAmount').value);
    let type = document.getElementById('depositType').value;
    if(amt<=0) { alert("Enter valid amount"); return; }
    let user = users[users.length-1]; // last registered user for demo
    if(!user) { alert("No user registered"); return; }
    deposits.push({uid:user.uid, name:user.name, bep20:user.bep20, upi:user.upi, type, amount:amt, status:"Pending"});
    updateAdminTable();
    alert("Deposit request sent! Admin will approve.");
    document.getElementById('depositAmount').value = 0;
}

function updateAdminTable() {
    const tbody = document.getElementById('adminTable').querySelector('tbody');
    tbody.innerHTML = "";
    totalDeposits = 0; totalProfit = 0;
    deposits.forEach((d,i)=>{
        let tr = document.createElement('tr');
        tr.innerHTML = `
        <td>${d.uid}</td>
        <td>${d.name}</td>
        <td>${d.bep20}</td>
        <td>${d.upi}</td>
        <td>${d.type}</td>
        <td>${d.amount}</td>
        <td>${d.status}</td>
        <td>
            ${d.status==="Pending"?`<button onclick="approve(${i})">Approve</button>`:""}
        </td>
        `;
        tbody.appendChild(tr);
        if(d.status==="Approved") {
            totalDeposits += d.amount;
            if(d.type==="USDT") totalProfit += parseFloat((d.amount*0.05).toFixed(2));
        }
    });
    document.getElementById('totalDeposits').innerText = totalDeposits.toFixed(2);
    document.getElementById('totalProfit').innerText = totalProfit.toFixed(2);
}

function approve(index) {
    deposits[index].status="Approved";
    updateAdminTable();
}
</script>
</body>
</html>
